import{useRef as r,useEffect as n}from"react";function getRandomInt(r,n){return Math.floor(Math.random()*(n-r+1))+r}function getRandomChar(r){var n=0;n=2===r.length?getRandomInt(r[0],r[1]):r[getRandomInt(0,r.length-1)];return String.fromCharCode(n)}var e=function useScramble(e){var t=e.playOnMount,a=void 0===t||t,c=e.text,u=void 0===c?"":c,o=e.speed,i=void 0===o?1:o,l=e.seed,v=void 0===l?1:l,f=e.step,d=void 0===f?1:f,m=e.tick,g=void 0===m?1:m,h=e.scramble,s=void 0===h?1:h,p=e.chance,A=void 0===p?1:p,F=e.overflow,w=void 0===F||F,y=e.range,b=void 0===y?[65,125]:y,I=e.overdrive,R=void 0===I||I,C=e.onAnimationStart,M=e.onAnimationFrame,k=e.onAnimationEnd,S=e.ignore,q=void 0===S?[" "]:S;var x="undefined"!==typeof window&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(x){d=u.length;A=0;R=false}var O=r(null);var T=r(0);var z=r(0);var E=1e3/(60*i);var H=r(0);var L=r(0);var N=r([]);var j=r(0);var B=function setIfNotIgnored(r,n){return q.includes(""+r)?r:n};var D=function seedForward(){if(L.current!==u.length)for(var r=0;r<v;r++){var n=getRandomInt(L.current,N.current.length);"number"!==typeof N.current[n]&&"undefined"!==typeof N.current[n]&&(N.current[n]=B(N.current[n],getRandomInt(0,10)>=10*(1-A)?s||v:0))}};var G=function stepForward(){for(var r=0;r<d;r++)if(L.current<u.length){var n=L.current;var e=getRandomInt(0,10)>=10*(1-A);N.current[n]=B(u[L.current],e?s+getRandomInt(0,Math.ceil(s/2)):0);L.current++}};var J=function resizeControl(){if(u.length<N.current.length){N.current.pop();N.current.splice(u.length,d)}for(var r=0;r<d;r++)N.current.length<u.length&&N.current.push(B(u[N.current.length+1],null))};var K=function onOverdrive(){if(R)for(var r=0;r<d;r++){var n=Math.max(N.current.length,u.length);if(j.current<n){N.current[j.current]=B(u[j.current],String.fromCharCode("boolean"===typeof R?95:R));j.current++}}};var P=function onTick(){G();J();D()};var Q=function animate(r){if(i){T.current=requestAnimationFrame(animate);K();var n=r-z.current;if(n>E){z.current=r;H.current%g===0&&P();U()}}};var U=function draw(){if(O.current){var r="";for(var n=0;n<N.current.length;n++){var e=N.current[n];switch(true){case"number"===typeof e&&e>0:r+=getRandomChar(b);n<=L.current&&(N.current[n]=N.current[n]-1);break;case"string"===typeof e&&(n>=u.length||n>=L.current):r+=e;break;case e===u[n]&&n<L.current:r+=u[n];break;case 0===e&&n<u.length:r+=u[n];N.current[n]=u[n];break;default:r+=""}}O.current.innerHTML=r;M&&M(r);if(r===u){N.current.splice(u.length,N.current.length);k&&k();cancelAnimationFrame(T.current)}H.current++}};var V=function reset(){H.current=0;L.current=0;j.current=0;w||(N.current=new Array(null==u?void 0:u.length))};var W=function play(){cancelAnimationFrame(T.current);V();C&&C();T.current=requestAnimationFrame(Q)};n((function(){if(N.current.length||a)V();else{H.current=u.length;L.current=u.length;j.current=u.length;N.current=u.split("")}return function(){cancelAnimationFrame(T.current)}}),[u,R,w]);n((function(){cancelAnimationFrame(T.current);T.current=requestAnimationFrame(Q);return function(){cancelAnimationFrame(T.current)}}),[Q]);return{ref:O,replay:W}};export{e as useScramble};

//# sourceMappingURL=use-scramble.esm.js.map